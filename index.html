<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="google-site-verification" content="3oWUXzVhlUfeoSOjgRiOfaMRBeyWszShxl6s1ah0AHk" />
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>z3jjlzt&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="z3jjlzt's blog">
<meta property="og:url" content="http://z3jjlzt.github.io/index.html">
<meta property="og:site_name" content="z3jjlzt's blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="z3jjlzt's blog">
<meta name="twitter:description">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://tp2.sinaimg.cn/1516632017/180/5721987710/1" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">z3jjlzt</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">时间轴</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/z3jjlzt" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/z3jjlzt " title="weibo">weibo</a>
					        
								<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/z3jjlzt" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/android/" style="font-size: 20px;">android</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/学习/" style="font-size: 10px;">学习</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">z3jjlzt</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="http://tp2.sinaimg.cn/1516632017/180/5721987710/1" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">z3jjlzt</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">时间轴</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/z3jjlzt" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/z3jjlzt " title="weibo">weibo</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/z3jjlzt" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-android studio 使用ndk" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/13/android studio 使用ndk/" class="article-date">
  	<time datetime="2016-04-13T08:40:26.000Z" itemprop="datePublished">2016-04-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/13/android studio 使用ndk/">android studio 使用ndk</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><ul>
<li>下载ndk。<a href="http://androiddevtools.cn/" target="_blank" rel="external">下载地址</a></li>
</ul>
<h3 id="新建一个NdkDemo。"><a href="#新建一个NdkDemo。" class="headerlink" title="新建一个NdkDemo。"></a>新建一个NdkDemo。</h3><ul>
<li>配置ndk，file-&gt;Project Structure。</li>
</ul>
<p><img src="http://ww1.sinaimg.cn/mw690/5a65f7d1gw1f2v5od9xbaj211v0lcdmv.jpg" alt=""></p>
<ul>
<li>在gradle.properties文件追加<code>android.useDeprecatedNdk=true</code></li>
</ul>
<p><img src="http://ww4.sinaimg.cn/mw690/5a65f7d1gw1f2v5odsipvj211v0lcdn1.jpg" alt=""></p>
<ul>
<li>新建<code>com.kkk.jni</code>包用于放置含有native方法的类。在包中新建jniMathKit.class。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kkk.jni;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">jniMathKit</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">int</span> <span class="title">getSum</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>;<span class="comment">//get a+b</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.loadLibrary(<span class="string">"jniDemo"</span>);<span class="comment">//与build.gradle中务必一致。这里注意,不要以lib开头,否则会出现类初始化错误，我也不知道原因。</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>新建jni文件夹。右击java文件夹New-&gt;Folder-&gt;JNI Folder。</li>
</ul>
<p><img src="http://ww2.sinaimg.cn/mw690/5a65f7d1gw1f2v5oeud4oj20l80fvq7j.jpg" alt=""></p>
<ul>
<li><p>点击Rebuild Project,切换目录结构Andorid——&gt;Project。如果在../app/build/下有intermediates继续下一步。</p>
</li>
<li><p>打开 终端 terminal，进入到../app/build/intermediates/classes/debug/ 执行<code>javah com.kkk.jni.jniMathKit</code>,可以发现在/debug文件夹下多个一个.h文件。把.h文件复制到jni文件夹（与java文件夹同层）中。</p>
</li>
</ul>
<p><img src="http://ww2.sinaimg.cn/mw690/5a65f7d1gw1f2v5oealv0j20900c3jsg.jpg" alt=""></p>
<ul>
<li>在对应的module的build.gradle文件中defaultConfig中添加ndk配置</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">defaultConfig &#123;</span><br><span class="line">      applicationId <span class="string">"com.kkk.ndkdemo"</span></span><br><span class="line">      minSdkVersion <span class="number">15</span></span><br><span class="line">      targetSdkVersion <span class="number">23</span></span><br><span class="line">      versionCode <span class="number">1</span></span><br><span class="line">      versionName <span class="string">"1.0"</span></span><br><span class="line">      ndk &#123;</span><br><span class="line">          moduleName <span class="string">"jniDemo"</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>再次Rebuild Project</strong>。</p>
</li>
<li><p>打开jniMathKit,把鼠标移动到getSum上，alt+enter，可以发现多一个Create function Java_com_kkk_jni_jniMathKit_getSum选项，点击创建。此时会创建一个jniDemo.c类，实现.h中的方法如下。</p>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#include "com_kkk_jni_jniMathKit.h"</span><br><span class="line"></span><br><span class="line">JNIEXPORT jint JNICALL Java_com_kkk_jni_jniMathKit_getSum</span><br><span class="line">        (JNIEnv *env, jobject jobject, jint a, jint b)&#123;</span><br><span class="line">    return a+b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>最后在mainAcitity中调用。编译运行。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.activity_main);</span><br><span class="line">    jniMathKit jniMathKit= <span class="keyword">new</span> jniMathKit();</span><br><span class="line">    Log.e(<span class="string">"sb"</span>, <span class="string">"sum :"</span>+ jniMathKit.getSum(<span class="number">5</span>,<span class="number">6</span>) );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a href="https://github.com/z3jjlzt/NdkDemo" target="_blank" rel="external">完整项目</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-面试笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/11/面试笔记/" class="article-date">
  	<time datetime="2016-04-11T11:33:47.000Z" itemprop="datePublished">2016-04-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/11/面试笔记/">面试笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h2 id="一-J2EE基础"><a href="#一-J2EE基础" class="headerlink" title="一. J2EE基础"></a>一. J2EE基础</h2><ul>
<li>九种基本数据类型的大小，以及他们的封装类。</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">基本类型</th>
<th style="text-align:center">大小（字节）</th>
<th style="text-align:center">默认值</th>
<th style="text-align:center">封装类</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">byte</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">Byte</td>
</tr>
<tr>
<td style="text-align:center">short</td>
<td style="text-align:center">2</td>
<td style="text-align:center">0</td>
<td style="text-align:center">Short</td>
</tr>
<tr>
<td style="text-align:center">int</td>
<td style="text-align:center">4</td>
<td style="text-align:center">0</td>
<td style="text-align:center">Integer</td>
</tr>
<tr>
<td style="text-align:center">long</td>
<td style="text-align:center">8</td>
<td style="text-align:center">0L</td>
<td style="text-align:center">Long</td>
</tr>
<tr>
<td style="text-align:center">float</td>
<td style="text-align:center"><strong>4</strong></td>
<td style="text-align:center">0.0f</td>
<td style="text-align:center">Float</td>
</tr>
<tr>
<td style="text-align:center">double</td>
<td style="text-align:center">8</td>
<td style="text-align:center">0.0d</td>
<td style="text-align:center">Double</td>
</tr>
<tr>
<td style="text-align:center">boolean</td>
<td style="text-align:center">1</td>
<td style="text-align:center">false</td>
<td style="text-align:center">Boolean</td>
</tr>
<tr>
<td style="text-align:center">char</td>
<td style="text-align:center">2</td>
<td style="text-align:center">null</td>
<td style="text-align:center">Character</td>
</tr>
<tr>
<td style="text-align:center">void</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center">Void</td>
</tr>
</tbody>
</table>
<ul>
<li><p>equals与==的区别。 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. ==指引用是否相同,equals()指的是值是否相同</span><br><span class="line">2. ==是指对内存地址进行比较,equals()是对字符串的内容进行比较</span><br><span class="line">3. ==是判断两个变量或实例是不是指向同一个内存空间 ,equals是判断两个变量或实例所指向的内存空间的值是不是相同 </span><br><span class="line">4. 使用==比较原生类型如：boolean、int、char等等，使用equals()比较对象。因为原生类型不是对象，没有方法。</span><br></pre></td></tr></table></figure>
</li>
<li><p>Switch能否用string做参数？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在java1.7之前，可以放int,byte,char。因为它们可以自动类型转换为int。java1.7可以使用string类型。</span><br><span class="line">```    </span><br><span class="line">- Object有哪些公用方法</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol>
<li>clone</li>
</ol>
<p>保护方法，实现对象的浅复制，只有实现了Cloneable接口才可以调用该方法，否则抛出CloneNotSupportedException异常。</p>
<ol>
<li>getClass</li>
</ol>
<p>final方法，获得运行时类型。</p>
<ol>
<li>toString</li>
</ol>
<p>该方法用得比较多，一般子类都有覆盖。</p>
<ol>
<li>finalize</li>
</ol>
<p>该方法用于释放资源。因为无法确定该方法什么时候被调用，很少使用。</p>
<p>5．equals</p>
<p>该方法是非常重要的一个方法。一般equals和==是不一样的，但是在Object中两者是一样的。子类一般都要重写这个方法。</p>
<p>6．hashCode</p>
<p>该方法用于哈希查找，可以减少在查找中使用equals的次数，重写了equals方法一般都要重写hashCode方法。</p>
<p>一般必须满足obj1.equals(obj2)==true。可以推出obj1.hash- Code()==obj2.hashCode()，但是hashCode相等不一定就满足equals。</p>
<p>如果不重写hashcode(),在HashSet中添加两个equals的对象，会将两个对象都加入进去。</p>
<ol>
<li>wait</li>
</ol>
<p>wait方法就是使当前线程等待该对象的锁，当前线程必须是该对象的拥有者，也就是具有该对象的锁。wait()方法一直等待，直到获得锁或者被中断。wait(long timeout)设定一个超时间隔，如果在规定时间内没有获得锁就返回。</p>
<p>调用该方法后当前线程进入睡眠状态，直到以下事件发生。</p>
<p>（1）其他线程调用了该对象的notify方法。</p>
<p>（2）其他线程调用了该对象的notifyAll方法。</p>
<p>（3）其他线程调用了interrupt中断该线程。</p>
<p>（4）时间间隔到了。</p>
<p>此时该线程就可以被调度了，如果是被中断的话就抛出一个InterruptedException异常。</p>
<ol>
<li>notify</li>
</ol>
<p>该方法唤醒在该对象上等待的某个线程。</p>
<ol>
<li>notifyAll</li>
</ol>
<p>该方法唤醒在该对象上等待的所有线程。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- Java的四种引用，强弱软虚，用到的场景。</span><br></pre></td></tr></table></figure></p>
<ol>
<li><p>强引用<br> Object obj = new Object();<br> 这里的obj引用便是一个强引用。垃圾回收器绝不会回收它。</p>
</li>
<li><p>软引用（SoftReference）<br> 如果内存空间足够，垃圾回收器就不会回收它，如果内存空间不足了，就会回收这些对象的内存。只要垃圾回收器没有回收它，该对象就可以被程序使用。软引用可用来实现内存敏感的高速缓存。软引用可以和一个引用队列（ReferenceQueue）联合使用，如果软引用所引用的对象被垃圾回收，Java虚拟机就会把这个软引用加入到与之关联的引用队列中。</p>
</li>
<li>弱引用（WeakReference）<br> 一旦发现了只具有弱引用的对象，不管当前内存空间足够与否，都会回收它的内存。不过，由于垃圾回收器是一个优先级很低的线程， 因此不一定会很快发现那些只具有弱引用的对象。  弱引用可以和一个引用队列（ReferenceQueue）联合使用，如果弱引用所引用的对象被垃圾回 收，Java虚拟机就会把这个弱引用加入到与之关联的引用队列中。 <ol>
<li>虚引用（PhantomReference）<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- Hashcode的作用。</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<p>1、hashCode的存在主要是用于查找的快捷性，如Hashtable，HashMap等，hashCode是用来在散列存储结构中确定对象的存储地址的；</p>
<p>2、如果两个对象相同，就是适用于equals(java.lang.Object) 方法，那么这两个对象的hashCode一定要相同；</p>
<p>3、如果对象的equals方法被重写，那么对象的hashCode也尽量重写，并且产生hashCode使用的对象，一定要和equals方法中使用的一致，否则就会违反上面提到的第2点；</p>
<p>4、两个对象的hashCode相同，并不一定表示两个对象就相同，也就是不一定适用于equals(java.lang.Object)方法，只能够说明这两个对象在散列存储结构中，如Hashtable，他们“存放在同一个篮子里”。</p>
<p>再归纳一下就是hashCode是用于查找使用的，而equals是用于比较两个对象的是否相等的。也就是说，我们先通过hashcode来判断某个类是否存放某个桶里，但这个桶里可能有很多类，那么我们就需要再通过equals来在这个桶里找到我们要的类。那么。重写了equals()，为什么还要重写hashCode()呢？想想，你要在一个桶里找东西，你必须先要找到这个桶啊，你不通过重写hashcode()来找到桶，光重写equals()有什么用啊<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- ArrayList、LinkedList、Vector的区别。</span><br><span class="line">![](http://ww1.sinaimg.cn/mw690/5a65f7d1gw1f2rp9prh75j206y07g3yb.jpg)</span><br></pre></td></tr></table></figure></p>
<p>一、同步性<br>ArrayList,LinkedList是不同步的，而Vestor是的。</p>
<p>二、数据增长<br>Vector缺省情况下自动增长原来一倍的数组长度，ArrayList是原来的50%,所以最后你获得的这个集合所占的空间总是比你实际需要的要大。</p>
<p>三、检索、插入、删除对象的效率<br>但是，如果在集合的其他位置增加或移除元素那么花费的时间会呈线形增长：O(n-i)，其中n代表集合中元素的个数，i代表元素增加或移除元素的索引位置。在进行上述操作的时候集合中第i和第i个元素之后的所有元素都要执行(n-i)个对象的位移操作。LinkedList中，在插入、删除集合中任何位置的元素所花费的时间都是一样的—O(1)，但它在索引一个元素的时候比较慢，为O(i),其中i是索引的位置。</p>
<p>所以，如果只是查找特定位置的元素或只在集合的末端增加、移除元素，那么使用Vector或ArrayList都可以。如果是对其它指定位置的插入、删除操作，最好选择LinkedList。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- String、StringBuffer与StringBuilder的区别。</span><br><span class="line">```   </span><br><span class="line">String 字符串常量,不可变的对象</span><br><span class="line">StringBuffer 字符串变量（线程安全）</span><br><span class="line">StringBuilder 字符串变量（非线程安全）</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>Map、Set、List、Queue、Stack的特点与用法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Collection是对象集合，Collection 有两个子接口List和Set</span><br><span class="line">List 可以通过下标(1,2..)来取得值，值可以重复</span><br><span class="line">而Set只能通过游标来取值，并且值是不能重复的</span><br><span class="line">ArrayList，Vector，LinkedList是List的实现类</span><br><span class="line">ArrayList是线程不安全的，Vector 是线程安全的，这两个类底层都是由数组实现的</span><br><span class="line">LinkedList是线程不安全的，底层是由链表实现的</span><br></pre></td></tr></table></figure>
</li>
<li><p>HashMap和HashTable的区别。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Hashtable的方法是同步的，HashMap则是非同步的，所以在多线程场合要手动同步HashMap，这个区别就像Vector和ArrayList一样。</span><br><span class="line"></span><br><span class="line">Hashtable不允许null值（key和value都不可以），HashMap允许null值（key和value都可以）。</span><br><span class="line"></span><br><span class="line">Hashtable比HashMap多一个elements方法用于遍历。</span><br><span class="line"></span><br><span class="line">Hashtable使用Enumeration，HashMap使用Iterator。</span><br><span class="line"></span><br><span class="line">哈希值的使用不同，Hashtable直接使用对象的hashCode，而HashMap重新计算hash值，而且用与代替求模。</span><br><span class="line"></span><br><span class="line">Hashtable中hash数组默认大小是11，增加的方式是 old*2+1。HashMap中hash数组的默认大小是16，而且一定是2的指数。</span><br></pre></td></tr></table></figure>
</li>
<li><p>HashMap和ConcurrentHashMap的区别，HashMap的底层源码。</p>
</li>
</ul>
<blockquote>
<p>ConcurrentHashMap：在hashMap的基础上，ConcurrentHashMap将数据分为多个segment，默认16个（concurrency level），然后每次操作对一个segment加锁，避免多线程锁的几率，提高并发效率。</p>
</blockquote>
<p><img src="http://images2015.cnblogs.com/blog/679904/201510/679904-20151025192734520-1277367181.png" alt=""></p>
<blockquote>
<p>HashMap的底层主要是基于数组和链表来实现的。HashMap底层是通过链表来解决hash冲突的。HashMap底层就是一个数组结构，数组中存放的是一个Entry对象。HashMap其实就是一个Entry数组，Entry对象中包含了键和值，其中next也是一个Entry对象，它就是用来处理hash冲突的，形成一个链表。</p>
</blockquote>
<ul>
<li><p>Collection包结构，与Collections的区别。</p>
<blockquote>
<p>Collection是集合类的上级<strong><em>接口</em></strong>，子接口主要有Set 和List、Map。<br>Collections是针对集合类的一个<strong><em>帮助类</em></strong>，提供了操作集合的工具方法：一系列静态方法实现对各种集合的搜索、排序、线程安全化等操作。</p>
</blockquote>
</li>
<li><p>try catch finally，try里有return，finally还执行么？</p>
<blockquote>
<p>会。一般先执行finally，在return。</p>
</blockquote>
</li>
<li><p>ava面向对象的三个特征与含义。</p>
<blockquote>
<p>面向对象的三个基本特征是：封装、继承、多态。</p>
</blockquote>
</li>
</ul>
<ol>
<li>封装，也就是把客观事物封装成抽象的类，并且类可以把自己的数据和方法只让可信的类或者对象操作</li>
<li>继承，它可以使用现有类的所有功能，并在无需重新编写原来的类的情况下对这些功能进行扩展。</li>
<li>允许将子类类型的指针赋值给父类类型的指针。Override和Overload</li>
</ol>
<ul>
<li>Override和Overload的含义去区别。<blockquote>
<p>二者完全是两个概念。重写Overriding是<strong>父类与子类</strong>之间多态性的一种表现，重载Overloading是<strong>一个类</strong>中多态性的一种表现。</p>
</blockquote>
</li>
<li>Interface与abstract类的区别。</li>
<li><blockquote>
<ol>
<li>抽象类不能被实例化，只能被用作子类的超类，接口是抽象方法的集合</li>
</ol>
</blockquote>
</li>
</ul>
<ol>
<li>单继承，实现多接口</li>
</ol>
<ul>
<li>Static class 与non static class的区别。</li>
</ul>
<blockquote>
<ol>
<li>静态内部类的作用：只是为了降低包的深度，方便类的使用，静态内部类适用于包含类当中，但又不依赖与外在的类，不用使用外在类的非静态属性和方法，只是为了方便管理类结构而定义。在创建静态内部类的时候，<strong>不需要外部类对象的引用</strong>。</li>
<li>非静态内部类有一个很大的优点：可以自由使用外部类的所有变量和方法，对<strong>外部类对象有引用</strong></li>
</ol>
</blockquote>
<ul>
<li>实现多线程的两种方法。</li>
</ul>
<blockquote>
<p> 继承Thread类。 实现Runable接口<br>后者优点：</p>
<ol>
<li>适合多个相同代码的线程去处理同一个资源的情况<ol>
<li>可以避免由于java的单继承特性带来的局限</li>
<li>增强了程序的健壮性，代码能够被多个线程共享，代码与数据时独立的</li>
<li>implement Runnable是面向接口，<strong>扩展性</strong>等方面比extends Thread好。</li>
</ol>
</li>
</ol>
</blockquote>
<ul>
<li>线程同步的方法。</li>
</ul>
<blockquote>
<p>sychronized，lock，reentrantLock，volatile</p>
<ol>
<li>sychronized同步方法，代码块（同步是一种高开销的操作，因此应该<strong>尽量减少同步的内容</strong>。通常没有必要同步整个方法，<strong>使用synchronized</strong>代码块同步关键代码即可。）</li>
<li>volatile关键字为域变量的访问提供了一种免锁机制，使用volatile修饰域相当于告诉虚拟机该域可能会被其他线程更新</li>
<li>重入锁reentrantLock，要注意及时释放锁</li>
<li>使用局部变量实现线程同步ThreadLocal</li>
</ol>
</blockquote>
<ul>
<li><p>锁的等级：方法锁（对象锁）、类锁。</p>
</li>
<li><p>写出生产者消费者模式。（理解多线程，和同步的使用）</p>
</li>
<li><p>ThreadLocal的设计理念与作用。</p>
<blockquote>
<p>Java中的ThreadLocal类允许我们创建只能被同一个线程读写的变量。</p>
</blockquote>
</li>
<li><p>Concurrent包里的其他东西：ArrayBlockingQueue、CountDownLatch等。</p>
</li>
</ul>
<blockquote>
<p>阻塞队列 BlockingQueue。</p>
</blockquote>
<ul>
<li>wait()和sleep()的区别。</li>
</ul>
<blockquote>
<ol>
<li>sleep()睡眠时，保持对象锁，仍然占有该锁；</li>
<li>而wait()睡眠时，释放对象锁。</li>
<li>sleep是Thread类的方法,wait是Object类中定义的方法</li>
<li>两者的共同点：都会阻塞当前线程。</li>
</ol>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/学习/">学习</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Rxjava结合Retrofit" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/10/Rxjava结合Retrofit/" class="article-date">
  	<time datetime="2016-04-10T07:33:47.000Z" itemprop="datePublished">2016-04-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/10/Rxjava结合Retrofit/">Rxjava结合Retrofit</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h3 id="一-添加依赖"><a href="#一-添加依赖" class="headerlink" title="一. 添加依赖"></a>一. 添加依赖</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">compile &apos;com.squareup.retrofit2:retrofit:2.0.0-beta4&apos;</span><br><span class="line">compile &apos;io.reactivex:rxjava:1.1.1&apos;</span><br><span class="line"></span><br><span class="line">compile &apos;com.squareup.retrofit2:converter-gson:2.0.0-beta4&apos;</span><br><span class="line">//Gson解析器</span><br><span class="line"></span><br><span class="line">compile &apos;io.reactivex:rxandroid:1.1.0&apos;</span><br><span class="line">//rxjava中用到的AndroidSchedulers.mainThread()</span><br><span class="line"></span><br><span class="line">compile &apos;com.squareup.retrofit2:adapter-rxjava:2.0.0-beta4&apos;</span><br><span class="line">这里使用的是retrofit2.0,默认为okhttp3.0</span><br></pre></td></tr></table></figure>
<h3 id="二-定义请求接口，转换HTTPAPI为Java接口"><a href="#二-定义请求接口，转换HTTPAPI为Java接口" class="headerlink" title="二. 定义请求接口，转换HTTPAPI为Java接口"></a>二. 定义请求接口，转换HTTPAPI为Java接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IgankApi</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GET</span>(<span class="string">"a.json"</span>)</span><br><span class="line">    Call&lt;List&lt;GirlEntity&gt;&gt; getGirl();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GET</span>(<span class="string">"data/%E7%A6%8F%E5%88%A9/&#123;count&#125;/&#123;page&#125;"</span>)</span><br><span class="line">    <span class="function">Call&lt;GirlJsonData&gt; <span class="title">getGirl</span><span class="params">(@Path(<span class="string">"count"</span>)</span> <span class="keyword">int</span> count, @<span class="title">Path</span><span class="params">(<span class="string">"page"</span>)</span> <span class="keyword">int</span> page)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//与rxjava结合api</span></span><br><span class="line">    <span class="meta">@GET</span>(<span class="string">"data/%E7%A6%8F%E5%88%A9/&#123;count&#125;/&#123;page&#125;"</span>)</span><br><span class="line">   <span class="function">Observable&lt;GirlJsonData&gt; <span class="title">getG</span><span class="params">(@Path(<span class="string">"count"</span>)</span> <span class="keyword">int</span> count, @<span class="title">Path</span><span class="params">(<span class="string">"page"</span>)</span> <span class="keyword">int</span> page)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="三-接着使用类Retrofit生成-接口的实现，使用了动态代理。"><a href="#三-接着使用类Retrofit生成-接口的实现，使用了动态代理。" class="headerlink" title="三. 接着使用类Retrofit生成 接口的实现，使用了动态代理。"></a>三. 接着使用类Retrofit生成 接口的实现，使用了动态代理。</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> IgankApi <span class="title">getIgankApi</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">if</span> (igankApi == <span class="keyword">null</span>) &#123;</span><br><span class="line">         <span class="keyword">synchronized</span> (IgankApi.class) &#123;</span><br><span class="line">             <span class="keyword">if</span> (igankApi == <span class="keyword">null</span>) &#123;</span><br><span class="line">                 Retrofit retrofit = <span class="keyword">new</span> Retrofit.Builder().baseUrl(<span class="string">"http://gank.io/api/"</span>)</span><br><span class="line">                         .addConverterFactory(gsonConverterFactory)</span><br><span class="line">                         .client(okHttpClient)</span><br><span class="line">                         .addCallAdapterFactory(rxJavaCallAdapterFactory)</span><br><span class="line">                         .build();</span><br><span class="line">                 igankApi = retrofit.create(IgankApi.class);</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> igankApi;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="四-调用接口。"><a href="#四-调用接口。" class="headerlink" title="四. 调用接口。"></a>四. 调用接口。</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">getImg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      NetUtils.getIgankApi().getG(<span class="number">10</span>, <span class="number">2</span>).flatMap(<span class="keyword">new</span> Func1&lt;GirlJsonData, Observable&lt;List&lt;GirlEntity&gt;&gt;&gt;() &#123;</span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="keyword">public</span> Observable&lt;List&lt;GirlEntity&gt;&gt; call(GirlJsonData girlJsonData) &#123;</span><br><span class="line">              <span class="keyword">return</span> Observable.just(girlJsonData.getResults());</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">              .subscribeOn(Schedulers.io())</span><br><span class="line">              .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">              .subscribe(<span class="keyword">new</span> Subscriber&lt;List&lt;GirlEntity&gt;&gt;() &#123;</span><br><span class="line">                  <span class="meta">@Override</span></span><br><span class="line">                  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">                  &#125;</span><br><span class="line"></span><br><span class="line">                  <span class="meta">@Override</span></span><br><span class="line">                  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">                  &#125;</span><br><span class="line"></span><br><span class="line">                  <span class="meta">@Override</span></span><br><span class="line">                  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(List&lt;GirlEntity&gt; girlEntities)</span> </span>&#123;</span><br><span class="line">                      girlEntityList.addAll(girlEntities);</span><br><span class="line">                      loge(girlEntityList.get(<span class="number">1</span>).getUrl() + <span class="string">""</span>);</span><br><span class="line">                      myRecycleViewAdapter.notifyDataSetChanged();</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="五-参考资料"><a href="#五-参考资料" class="headerlink" title="五. 参考资料"></a>五. 参考资料</h3><p><a href="http://gank.io/post/56e80c2c677659311bed9841" target="_blank" rel="external">tough1985的作品</a><br><a href="https://github.com/z3jjlzt/Girl" target="_blank" rel="external">完整项目</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-android Binder跨进程 AIDL使用" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/10/android Binder跨进程 AIDL使用/" class="article-date">
  	<time datetime="2016-04-10T07:33:47.000Z" itemprop="datePublished">2016-04-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/10/android Binder跨进程 AIDL使用/">android Binder跨进程 AIDL使用</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-Binder通信机制流程-整体框架"><a href="#1-Binder通信机制流程-整体框架" class="headerlink" title="1. Binder通信机制流程(整体框架)"></a>1. Binder通信机制流程(整体框架)</h2><p><img src="http://img.blog.csdn.net/20130529140129511" alt=""></p>
<h2 id="2-如何使用AIDL"><a href="#2-如何使用AIDL" class="headerlink" title="2. 如何使用AIDL"></a>2. 如何使用AIDL</h2><h3 id="一-服务端"><a href="#一-服务端" class="headerlink" title="一. 服务端"></a>一. 服务端</h3><ul>
<li>创建一个专门用来 存放AIDL文件的包 如 <code>com.kkk.myaidl</code></li>
<li><p>在 <code>com.kkk.myaidl</code> 包下建一个.aidl文件，如 <code>IService.aidl</code>,代码如下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kkk.myaidl;</span><br><span class="line"><span class="keyword">import</span> com.kkk.aidl.Person;<span class="comment">//很重要，即使在同一个包下也要加import.</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IServiceaidl</span></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSum</span><span class="params">(<span class="keyword">int</span> num1,<span class="keyword">int</span> num2)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Person <span class="title">getPerson</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setPerson</span><span class="params">(in Person person)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line">另外，接口中的参数除了aidl支持的类型，其他类型必须标识其方向：到底是输入还是输出抑或两者兼之，用in，out或者inout来表示，上面的代码我们用in标记，因为它是输入型参数。</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建服务端service</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kkk.service;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyService</span> <span class="keyword">extends</span> <span class="title">Service</span></span>&#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> IBinder <span class="title">onBind</span><span class="params">(Intent intent)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> mbinder;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> IServiceaidl.Stub mbinder = <span class="keyword">new</span> IServiceaidl.Stub()&#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSum</span><span class="params">(<span class="keyword">int</span> num1,<span class="keyword">int</span> num2)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num1+num2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在manifests中声明service</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;service android:name=&quot;.MyService&quot; android:enabled=&quot;true&quot; android:exported=&quot;true&quot;&gt;</span><br><span class="line">            &lt;intent-filter&gt;</span><br><span class="line">                &lt;action android:name=&quot;com.kkk.service.MyService&quot;/&gt;</span><br><span class="line">                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;</span><br><span class="line">            &lt;/intent-filter&gt;</span><br><span class="line">        &lt;/service&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>设置action是为了其他应用隐式bindService。通过隐式调用的方式来起activity或者service，需要把category设为default，这是因为，隐式调用的时候，intent中的category默认会被设置为default。</p>
<ul>
<li>传输自定义类型的参数。<br>  android studio中，新建一个aidl文件，会自动生成一个aidl文件夹。在其中定义需要的类型的.aidl文件。如 <code>Person.aidl</code>。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kkk.aidl;</span><br><span class="line">parcelable Person;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>注意，这里的parcelable是类型，不是Parcelable接口。<strong>接着在jave文件夹下建立一个与aidl中相同的包名,如<code>com.kkk.aidl</code>。</strong>在包中新建Person.java，并实现Parcelable接口。一定不能直接把Person.java放在自动生成的aidl文件夹下，否则会出现无法找到Person.java类的错误。</p>
<h3 id="二-客户端"><a href="#二-客户端" class="headerlink" title="二. 客户端"></a>二. 客户端</h3><ul>
<li>将服务端工程中的<code>com.kkk.myaidl</code>包整个拷贝到客户端中。双方的aidl包名必须完全一致，否则会报错。</li>
<li><p>新建一个ServiceConnection。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> ServiceConnection mconnection = <span class="keyword">new</span> ServiceConnection()&#123;</span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onServiceDisconnected</span><span class="params">(ComponentName name)</span>  </span><br><span class="line">       </span>&#123;  </span><br><span class="line">           mIMyService = <span class="keyword">null</span>;  </span><br><span class="line">       &#125;  </span><br><span class="line"></span><br><span class="line">       <span class="meta">@Override</span>  </span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onServiceConnected</span><span class="params">(ComponentName name, IBinder service)</span>  </span><br><span class="line">       </span>&#123;  </span><br><span class="line">           <span class="comment">//通过服务端onBind方法返回的binder对象得到MyService的实例，得到实例就可以调用它的方法了  </span></span><br><span class="line">            mIServiceaidl =IServiceaidl.Stub.asInterface(service);</span><br><span class="line">       &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>绑定service。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent();</span><br><span class="line">intent.setAction(BIND_SERVICE);</span><br><span class="line">bindService(intent, mconnection, Context.BIND_AUTO_CREATE);</span><br></pre></td></tr></table></figure>
</li>
<li><p>调用getSum。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">int</span> sum = mIServiceaidl.add(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">      Log.e(TAG, <span class="string">"add: "</span> + sum);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (RemoteException e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a href="http://blog.csdn.net/singwhatiwanna/article/details/17041691" target="_blank" rel="external">任玉刚blog</a><br><a href="https://github.com/z3jjlzt/AIDLservice" target="_blank" rel="external">完整项目</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 z3jjlzt
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    

<script>
	var yiliaConfig = {
		fancybox: false,
		mathjax: false,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






  </div>
</body>
</html>